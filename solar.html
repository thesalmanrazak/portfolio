<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salman's Portfolio | Website Designing and Development</title> 
    <link rel="stylesheet" href="./assets/css/three.css">
</head>
<body>

    <div id="container">
        <button type="button" class="backBtn" onclick="window.location.replace('threejs.html');">Back</button>
    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "./assets/build/three.module.js",
                "three/addons/": "./assets/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
        import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
        import { ShaderPass } from 'three/addons/postprocessing/ShaderPass.js';
        import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

        const container = document.getElementById('container');

        const loader = new THREE.TextureLoader();
        let sun, earth, moon, scene, camera, renderer, controls;
        let moonTexture, geometry, material;
        let light, directionalLight, helper;

        function init(){
            scene = new THREE.Scene();
            
            camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 1, 10000 );
            camera.position.z = 50;
            helper = new THREE.CameraHelper( camera );
            scene.add( helper );
            
            renderer = new THREE.WebGLRenderer();
            //renderer.setPixelRatio( window.devicePixelRatio );
            renderer.setSize( window.innerWidth, window.innerHeight );
            container.appendChild( renderer.domElement );




            geometry = new THREE.SphereGeometry( 16, 128, 64 );
            material = new THREE.MeshStandardMaterial({
                map : loader.load('./assets/media/planet/euvi_aia304_2012_carrington_print.jpg'),
                //bumpMap : loader.load('./assets/media/planet/moonbump4k.jpg'),
                //bumpScale : 0.002,
            });
            sun = new THREE.Mesh( geometry, material );
            scene.add( sun );


            geometry = new THREE.SphereGeometry( 3.2, 128, 64 );
            material = new THREE.MeshStandardMaterial({
                map : loader.load('./assets/media/planet/8081_earthmap4k.jpg'),
                bumpMap : loader.load('./assets/media/planet/8081_earthbump4k.jpg'),
                bumpScale : 0.002,
            });
            earth = new THREE.Mesh( geometry, material );
            earth.position.set(30,0,0);
            scene.add( earth );






            
            geometry = new THREE.SphereGeometry( 4.75, 128, 64 );
            material = new THREE.MeshStandardMaterial({
                map : loader.load('./assets/media/planet/moonmap4k.jpg'),
                bumpMap : loader.load('./assets/media/planet/moonbump4k.jpg'),
                bumpScale : 0.002,
            });
            moon = new THREE.Mesh( geometry, material );
            //moon.scale.set(4.75,4.75,4.75);            
            moon.position.set(0,-4.5,2);
            moon.rotation.x = 50;
            moon.rotation.y = 50;
            //scene.add( moon );

            
            const pointLight = new THREE.PointLight( 0xffffff, 20, 100 );
            pointLight.position.set( 0, 40, 0 );
            scene.add( pointLight );

            const sphereSize = 1;
            const pointLightHelper = new THREE.PointLightHelper( pointLight, sphereSize );
            scene.add( pointLightHelper );






            directionalLight = new THREE.DirectionalLight( 0xffffff, 2 );
            directionalLight.position.set(0,10,0);
            directionalLight.target = sun;
            //scene.add( directionalLight );
            helper = new THREE.DirectionalLightHelper( directionalLight, 5 );
            //scene.add( helper );

            const hemiLight = new THREE.HemisphereLight( 0xffffff, 0xffffff, 1 );
            hemiLight.color.setHSL( 1, 1, 1 );
            hemiLight.groundColor.setHSL( 1, 1, 1 );
            hemiLight.position.set( 0, -10, 0 );
            //scene.add( hemiLight );
            const hemihelper = new THREE.HemisphereLightHelper( hemiLight, 5 );
            //scene.add( hemihelper );

            controls = new OrbitControls( camera, renderer.domElement );
            controls.autoRotate = false;
            controls.autoRotateSpeed = 0.1;
            controls.enableZoom = true;
            //controls.enableRotate = true;
            //controls.object = moon;
            controls.update();

            window.addEventListener('resize', onWindowResize);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        init();

        function animate() {
            requestAnimationFrame( animate ); // moon.rotation.x += 0.001; moon.rotation.y += 0.001;
            controls.update();
            sun.rotation.x += 0.001; sun.rotation.y -= 0.001;
            earth.rotation.x -= 0.001; earth.rotation.y += 0.001;
            renderer.render( scene, camera );
        }
        
        animate();
    </script>

</body>
</html>